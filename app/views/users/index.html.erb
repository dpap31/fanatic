<!DOCTYPE html>
<html ng-app='userSearchApp'>
<head>
  <%= javascript_include_tag "users"%>
  <%= stylesheet_link_tag "users_index" %>
</script>
</head>

<h2>Search Users</h2>
  <div ng-controller="UserCtrl">
      <input type="text" class="form-control" placeholder="Search users by name, username, email" ng-model="query">
    <ul class = 'userlist'ng-show='query'>
    <li ng-repeat="user in users | filter: query" class ="animate results"> 
    <a href="/users/{{user.id}}/posts"
    <div class= 'search_results'>    
     <img ng-src="{{user.image}}"/>
      <span id='user_details'><b>{{user.name}}</b>, <em>{{user.username}}</em>
      </span>
    </div>
    </a>
    </li>
    </ul>
    <h3>Top Authors All Time</h3>
<ul>
    <% @top_authors.first(5).each do |u|%>
 <li> 
      <%= u.name %>
      <%= u.posts.count %> 
  </li>
  <% end %>
  </ul>

     <h3>Trending Authors</h3>
<ul>
    <% @trending_authors.first(5).each do |u|%>
 <li> 
      <%= u.name %>
      <%= u.reputation_for(:votes).to_i %> 
  </li>
  <% end %>
</ul>
     <h3>Authors by Followers</h3>
<ul>
    <% @followed_authors.first(5).each do |u|%>
 <li> 
      <%= u.name %>
      <%= u.friendships.count%> 
  </li>
  <% end %>
</ul>

